설명회 시간의 흐름대로 내용을 정리해 드리겠습니다.

---

### SPFW 관련 설명

**1. SPFW의 기본 개념 및 구성 요소**
*   **SP(Service Provider)**는 모든 시스템의 상위 개념이며, 그 아래에 애플리케이션이 있습니다.
*   상위 시스템은 주로 관리를 목적으로 합니다.
    *   예: ES UI 시스템 아래에 10개 이상의 애플리케이션이, MVP 시스템 아래에 8-9개의 애플리케이션이 있습니다.
*   **SP 그룹**은 애플리케이션과 동급으로 간주됩니다.
*   SPFW는 권한 그룹 및 방화벽과 연관이 있습니다.

**2. SP 그룹의 하위 구조 및 역할**
*   SP 그룹은 하위에 서브 그룹을 명명합니다.
*   서브 그룹 아래에는 **오너 (Owner)**, **시스 어드민 (SysAdmin)**, **오퍼레이터 (Operator)**, **프로젝트 (Project)**와 같은 역할이 있습니다.
    *   **프로젝트**는 시스템 및 애플리케이션의 상위 개념으로, 아마존의 IAM과 유사하게 여러 시스템을 한꺼번에 테마별로 관리할 수 있게 합니다. 이는 **프로젝트 ID**와 같은 역할을 합니다.
*   각 애플리케이션을 관리하는 서버의 **호스트 네임**을 입력할 수 있습니다. 이는 **컴퓨터 그룹**으로 볼 수 있습니다.
*   시스템 및 애플리케이션에 활용되는 DB 서버, 아스 서버, 웹 서버 등 **서버 리스트**를 입력합니다.
*   **엑세스 서버 (Access Server)**는 서버에 접속해야 하는 사용자에 대한 그룹이며, 오퍼레이터, 시스 어드민, 오너 등이 멤버가 될 수 있습니다.
*   **DB (DB Safer)**는 프리빌리지 액세스 관리 도구와 유사합니다.
*   **방화벽 (Firewall)**은 접근 그룹(Access 5)을 의미합니다.
*   사내 시스템은 **유저스 RBS (Users RBS)**로 정의됩니다.
*   **SPFW:xxx**는 SP 그룹의 전체 이름 명명 규칙이며, 시스템 및 애플리케이션마다 하위에 서브 그룹들이 접미사로 붙는 구조입니다.
*   인트라넷용 SPFW에는 접두사로 'i'가 붙습니다.

**3. 방화벽 및 RBS (Risk-Based Security) 연동**
*   방화벽 명명 규칙에서 'i' (인트라넷)를 앞에 붙이고, 'R' (리모트)도 사용될 수 있습니다.
*   이 방화벽 그룹의 멤버들은 방화벽에 직접 추가됩니다.
*   **RBS**는 신청 화면에서 사용자가 승인을 받으면 각 SP 그룹의 멤버가 되도록 하여, 방화벽을 자동으로 통과할 수 있게 합니다.
*   승인 단계(Approval 1, 2, 3, 4, 5)는 EQMS 개념을 활용하여 특정 권한 획득 시 사전 권한 보유자의 동의를 조건으로 할 수 있게 합니다.
*   나머지 설정은 커스터마이징 가능합니다.

**4. 서브 그룹 수 및 명명 규칙**
*   SP 그룹당 서브 그룹은 현재 20개로 정의되어 있지만, 최대 50개까지 가능하며, 임의로 정한 제한입니다 (네 자리 숫자로 9,999개 이상 생성 가능).
*   명명 규칙(예: SPxxx**006**은 하드웨어, SPxxx**007**은 DB, SPxxx**008**은 방화벽)은 모든 SP 그룹에 통일된 정책을 적용하기 위함입니다.
    *   이는 G3s나 기타 신청 시스템에서 AD 그룹(SPxxx006)을 호출하여 특정 하드웨어 멤버 규칙으로 사용하는 등 재활용이 가능합니다. 이 명명 규칙은 변경 불가합니다.
*   방화벽은 스펙에 따라 그룹 ID 수에 제한이 있으나, 멤버(사용자 ID)는 자유롭습니다.
    *   따라서 SSL 파트너와의 협의를 통해 방화벽 그룹에 **사용자 ID만** 넣고 그룹 ID는 넣지 않기로 했습니다.

**5. 방화벽 운영 방식 및 AD 에이전트 서버**
*   사내에 280개 가량의 방화벽이 있으며, 각각 AD 에이전트 서버를 가지고 있습니다.
*   현재 방화벽 신청 시 룰에 타겟 IP/포트와 소스 IP를 넣지만, 앞으로는 **그룹**을 활용합니다.
    *   **SPFW** 그룹의 멤버이면 데스티네이션 포트로 오픈해줍니다.
*   DNS 및 ADSS는 인증 시스템에 필요한 IP/포트 정보를 가지고 있어, 이를 통해 소스 그룹(예: SPFWxxx008)을 활용할 수 있습니다.
*   IP 타겟은 ADSS를 통해 관리하고, 관리 권한은 각 시스템 담당자에게 위임하여 스스로 관리하게 합니다.
*   각 SP 그룹의 URL, 도메인, IP, 포트 정보를 G3s에 연동하여 변경 관리가 가능하게 합니다.

**6. 시스템 워크플로우 플랫폼 (SWP) 및 엔터프라이즈 아키텍처 (EA) 연동**
*   방화벽 타겟팅은 SWP의 EA(Enterprise Architecture)를 대상으로 합니다.
*   EA는 애플리케이션 아키텍처 현황을 관리하지만, URL 정보가 부족하여 ADSO 퀵링크에서 이 정보를 제공할 예정입니다.
*   ADSS는 서비스 URL과 엔드포인트 URL이 정확해야 접근이 가능하므로, 이 정보는 항상 최신 상태로 유지됩니다.
*   DNS 신청도 레코드명과 IP 주소가 필수적이므로, 시스템 담당자들이 자발적으로 정보를 현행화할 수밖에 없습니다.
*   이 정보를 바탕으로 G3s 등에서 활용할 계획입니다.

**7. 프리셋(Preset) 및 사용자 관리 원칙**
*   **프리셋** (또는 프리디파인드) IP/포트 정보는 G3s에 미리 정의됩니다.
*   RBS 신청 시, 사용자가 필요한 시스템을 선택하면 승인 후 해당 그룹의 멤버가 되어 방화벽을 자동으로 통과합니다.
*   일반 직원 그룹(예: SPxxx010)이나 부서별 그룹도 활용하여 방화벽 리스트에 멤버로 추가할 수 있습니다. 이후 이는 사용자 ID로 풀어 해쳐져 적용됩니다.
*   사용 기간도 설정할 수 있습니다.
*   **원칙:** 프리셋은 고정되며, 변경 관리는 각 시스템 담당자가 하고, 사용자들의 신청 여부는 그룹 멤버십으로 결정됩니다.
*   초기 설계에서는 그룹 ID, 시스템 이름(예: SP1478의 001은 슈퍼 어드민) 등을 정의했으며, 조직 그룹, 특정 ID, 다른 그룹, 도메인 사용자, 파트너, 국내 임직원 등을 멤버로 포함할 수 있습니다. 이 때문에 "20개 + 알파"의 서브 그룹 개념이 나왔습니다.

**8. 권한 체계 및 관리자 포털**
*   권한은 크게 시스템 관리자, 정책 관리자, 사용자 관리자, 레거시 시스템 관리자, 감사자로 나뉩니다.
    *   **시스템 관리자:** 1등급(오너, 가장 큰 권한)부터 4등급(헬프데스크)까지.
    *   **정책 관리자:** 거버넌스 오너, 심의자.
    *   **사용자 관리자:** 사업부, 팀, 그룹, 파트 부서장 등.
    *   **레거시 시스템 관리자:** 오너, 시스템 어드민, 오퍼레이터, 헬프데스크.
    *   **감사자:** 읽기 전용.
*   이러한 권한은 관리자 포털 내 메뉴별 접근 권한을 정의합니다.
*   정보보안 부서의 요청에 따라, 레거시 시스템 담당자, 오너, 사용자 관리자 등 일부는 관리자 포털이 아닌 **사용자 포털**에서 결제선 관리 등의 특정 업무를 수행하도록 설계되었습니다. 다만, 중요 시스템의 권한 관리는 관리자 포털에 유지될 수 있습니다.

**9. 프로젝트 ID와 AD 구조 설명**
*   클라우드 유저 포털에서 **프로젝트** 개념이 중요하며, AD 서비스 시스템은 프로젝트 아래에 구성됩니다.
*   하나의 프로젝트 아래에 여러 시스템이 있을 수 있으며, 각 시스템에 대해 사용자 그룹(매니저, 일반 유저)을 정의하고 가시성을 제어할 수 있습니다.
*   프로젝트 멤버는 각 시스템의 멤버를 포함할 수 있으며, 오브젝트 스토리지, 서버, 비즈니스 도메인, 오너(복수 가능) 정보도 포함됩니다.
*   이러한 정보들은 확인 및 활용을 위해 저장됩니다.

**10. 미래 계획: 키클락(Keycloak) 및 볼트(Vault) 도입**
*   내년에 쿠버네티스, 클라우드 유저 포털, HPC 지원이 계획되어 있습니다.
*   현재 분리된 다양한 IDP(Identity Provider)를 통합하는 것이 목표입니다 (ADFS만으로는 부족).
*   **키클락**은 PC 및 서버를 포함한 복잡한 쿠버네티스 환경에서의 인증 및 권한 부여를 위해 도입됩니다.
*   **볼트**는 API 허브의 암호화 통신 처리를 위해 도입됩니다.
*   내년에는 엘라스틱이나 키클락 활용 경험이 있는 인력의 도움이 필요합니다.

**11. 권한 위임의 핵심 원리**
*   핵심 컨셉은 **각 담당자가 권한을 위임받아 직접 관리**하는 것이며, AD 담당 팀이 모든 것을 처리하는 것이 아닙니다.

**12. AD(Active Directory) 구조 상세 설명**
*   MSC DSA를 통해 AD의 사용자 및 컴퓨터 구조를 설명합니다.
*   AD에는 기본적으로 제공되는 컨테이너(Users, Computers, Security Principals, Managed Service Accounts, Users)와 별도로, 사용자가 디자인하여 만든 OU(Organizational Unit)들이 있습니다.
    *   **Location** OU는 법인별로 나뉘어 있으며, RBS, ETC, IVDI, 평택 설계 플랫폼(PDP) 등 특이 사항에 따라 별도 OU가 있습니다. 관리 목적으로 분리되어 있습니다.
    *   **공통 OU:** 모든 법인에 공통적으로 존재하는 OU는 Admins, Computers, Groups, Servers, Users 입니다.
        *   **Admins:** 내부 관리 목적.
        *   **Computers:** 서버를 포함하며, CA, 데이터 플랫폼, 데스크탑 등에서 활용.
        *   **Groups:** 애플리케이션 그룹(SPxxx)이 많았으나 방화벽 문제로 재구성. Amazon 그룹, 컴퓨터 그룹(테스트용), 조직 그룹(ORG가 최상단), 비활성화된 그룹, 시큐리티 그룹(CSG, 헬스포털에서 사용), 워크 그룹(SSG, DC팀 클라우드용) 등이 있습니다.
        *   **Users:** 직원 사용자(Employee)는 SMDM의 회사 코드, 사업부 코드, 로케이션 코드를 통해 소속이 정의됩니다. 파트너 및 관계자 사용자(Partner/Related)는 IM 포털 등에서 신청 시 해당 OU로 들어옵니다.
*   AD 구조는 일반적으로 **읽기 전용**으로 제공되며, 실제 수정은 서버에서 관리자 계정으로만 가능합니다.
*   변경 내역은 **체인지 오디터 (Change Auditor)**를 통해 모니터링되고 기록됩니다.

**13. 포털을 통한 업무 자동화 및 보안 강화**
*   일반 사용자의 도메인 컨트롤러 직접 접근은 차단되어 있으며, 하이웨어를 통해 접근합니다.
*   AD 업무 중 오퍼레이터나 헬프데스크 업무는 대부분 **셀프 서비스**나 **포털**을 통해 처리되도록 전환 중입니다.
*   사용자 변경은 서버나 DB 접근, 엑세스 서버, 엑세스 파이어월 규칙에 영향을 미칩니다.

**14. RBS 관련 노트북 분실 시 대응 및 보안 정책**
*   노트북 분실 시 하드웨어 자체보다는 **데이터 보안**이 중요하며, 디스크 암호화(비트라커)가 되어 있어 하드디스크를 분리해도 데이터가 유출되지 않습니다.
*   RBS는 VM(가상 머신)을 통해 2차 인증으로 접속하며, RBS 전용 PC는 영상 감지를 통해 모니터링하고 기록합니다.
*   RBS 라이트(Lite)는 일반적인 사용을 위한 것으로, 이상 감지는 보안 부서에서 처리합니다. R, Fit 등 다양한 보안 툴이 로그인 이력을 모니터링합니다.
*   RBS 라이트의 접근은 Knox Portal, HR 관련 개인 정보 외에는 엄격히 제한되며, 생산 시스템 접근은 거의 불가능합니다.
*   최근 TSMC 사고로 인해 정보보안 부서에서 주요 시스템 조사가 진행 중이며, 차단 실행은 시스템 담당자들이 담당하게 됩니다.
*   RBS 대역의 VM 영역은 정동훈 담당자가 그룹 ID로 관리하며, 일반 사용자의 신청은 거부됩니다. 신규 등록이나 변경 또한 보안성 검토 및 승인을 거쳐야 합니다. 사내 시스템도 완화된 방식이지만 유사한 통제 방식이 적용될 예정입니다.

**15. AD 에이전트 서버와 방화벽의 연동 원리**
*   AD 에이전트 서버는 이벤트 로그를 통해 사용자 ID와 IP 사용 이력을 기록합니다.
*   방화벽이 사용자 ID를 조회하면, AD 에이전트 서버가 IP 정보를 제공하여 방화벽이 정책을 확인하고 접근을 허용합니다.
*   이 과정은 **자동화된 오케스트레이션**처럼 진행됩니다.

**16. 시스템의 중요성 및 미래 확장성**
*   네트워크 및 방화벽 담당자들은 자신들의 업무 영역이 줄어든다고 생각하여 이러한 시스템을 선호하지 않는 경향이 있으며, 일반 업체에서는 잘 적용되지 않는 방식입니다.
*   그러나 이 시스템은 이미 2-3년 동안 사용되어 왔으며, 이제 응용할 단계에 이르렀습니다.
*   사용자가 필요한 서비스를 선택하면, 미리 정의된 SP 그룹을 통해 방화벽 규칙이 자동으로 적용되어 접근이 허용됩니다.
*   이 시스템은 법인 간의 AD 포워더 설치, ID 교환 등을 통해 그룹사 전체로 확대될 수 있으며, 중국, 인도, 미국 등에서 높은 활용도를 보일 것으로 예상됩니다.
*   이 시스템은 매우 중요하며, 성공적으로 구축될 경우 매우 큰 파급 효과를 가져올 것이며, 국내에서는 드문 형태의 구성이라고 평가됩니다.
